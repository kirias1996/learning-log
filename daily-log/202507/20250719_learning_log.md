# 🧠 Discordボット開発でハマった課題の再整理

## 🎯 目的

* 詰まった課題の抽象化
* 同じ事象に再度ハマったとき、自力で解決できる応用力をつける
* 具体例に依存せず、考え方を再現できるようにする

---

## ⚠️ 課題

* APIリファレンスを正しく読み解けず、コンパイルエラーが多発
* 使うべきメソッドの判断がつかないことがある

---

## ✅ 解決方法（自分の考察）

### ① 発火イベントのAPIリファレンスを調査する

* 任意のメッセージ取得方法を整理しておく
* ユーザ or Bot の判定
* リアクションの種類確認
* チャンネルの種類確認（例：TextChannelかどうか）

### ② メソッドの探し方

* メソッド名がわかっていれば、APIリファレンスのIndexページから検索
* VS Codeでインターフェースから実装クラスをたどる

  * 実装クラスがわかれば、どのインスタンスで使えるかが明確になる

---

## 🔍 補足アプローチ（より応用力を高めるために）

### ✅ 型ベースの探索力を持つ

* 常に「この変数の型は何か？」「戻り値の型は何か？」を意識する
* `event.getChannel()` の型 → `MessageChannel`
  `retrieveMessageById()` を使いたければ `TextChannel` へのキャストが必要

---

### ✅ 型の継承構造を図にして理解する

```text
MessageReactionAddEvent
 └── GenericMessageReactionEvent
      └── GenericMessageEvent
           └── Event
```

* どのクラスにどのメソッドがあるか把握しやすくなる

---

### ✅ 公式リファレンスとIDEの使い分けを明確にする

| 目的            | 使用すべき手段                |
| ------------- | ---------------------- |
| メソッド一覧を調べる    | 公式APIリファレンス（Javadoc）   |
| 戻り値・引数の型を確認   | IDEで型ジャンプ（Ctrl+クリックなど） |
| 実装元のクラスを調べる   | IDEで階層構造をたどる           |
| どのインスタンスで使えるか | 変数の型＋継承構造を意識する         |

---

### ✅ よく使うパターンを自作スニペットとして保存

* `event.getReaction().getEmoji().getName()` → リアクションの種類を取得
* `event.getChannelType() == ChannelType.TEXT` → Textチャンネル判定
* `textChannel.retrieveMessageById(id)` → メッセージ取得
* `message.getAttachments()` → 添付ファイル取得
* `message.getAuthor().isBot()` → Botかどうか判定

---

### ✅ コンパイルエラー時のデバッグ思考法

1. 何がnullか？どこで型エラーが出ているか？
2. 変数の型は何か？
3. その型が持つメソッドをAPI or IDEで確認する

---

## 🏁 まとめ：強化したい思考・行動パターン

| 項目        | 内容                         |
| --------- | -------------------------- |
| 型ベース思考    | 型から使えるメソッドやキャストの要否を判断      |
| 継承構造の把握   | よく使うイベントやチャンネルの階層を図にして記憶   |
| ツールの使い分け  | APIリファレンスとIDEを役割分担で使う      |
| パターンの蓄積   | よく使う処理をテンプレートとして再利用        |
| エラーの切り分け力 | null・型・アクセス権などの要因を分解して特定する |

---

必要であれば、この形式のままGitHubのWikiやNotionに貼って活用できます。
今後も同じ思考フレームで新しい問題に取り組めば、確実に自力で解決できるようになります！
